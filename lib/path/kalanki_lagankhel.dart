import 'package:final_project/widget/drawer.dart';
import 'package:flutter/material.dart';
import 'package:flutter_map/flutter_map.dart';
import 'package:latlong/latlong.dart';
import 'package:final_project/main.dart';
import 'package:font_awesome_flutter/font_awesome_flutter.dart';
import 'dart:math' show cos, sqrt, asin;


class KalankiToLagankhel extends StatefulWidget {
  @override
  _KalankiToLagankhelState createState() => _KalankiToLagankhelState();
}

class _KalankiToLagankhelState extends State<KalankiToLagankhel> {

var kotToRatnapark = [
    {"lat": 27.67604595399177, "lng": 85.34524650852127},
    {"lat": 27.676550149753904, "lng": 85.34597301322634},
    {"lat": 27.677225926446624, "lng": 85.34699858909657},
    {"lat": 27.677994335286662, "lng": 85.34819753652623},
    {"lat": 27.678773427448196, "lng": 85.34942196494153},
    {"lat": 27.67893526988431, "lng": 85.3495297334411},
    {"lat": 27.679104238105207, "lng": 85.34953289595707},
    {"lat": 27.679829696303386, "lng": 85.34951935235075},
    {"lat": 27.68056339681933, "lng": 85.34948162115482},
    {"lat": 27.681169079704013, "lng": 85.3494427291241},
    {"lat": 27.681887009758768, "lng": 85.3494013477126},
    {"lat": 27.682626213661937, "lng": 85.34931615799088},
    {"lat": 27.68320347805139, "lng": 85.34920490689147},
    {"lat": 27.683708040808312, "lng": 85.34897157982125},
    {"lat": 27.6839793658395, "lng": 85.34880068463146},
    {"lat": 27.68423643967758, "lng": 85.34860833089076},
    {"lat": 27.68473165810179, "lng": 85.34816040198527},
    {"lat": 27.68516611165368, "lng": 85.34764187101858},
    {"lat": 27.685482530664537, "lng": 85.3471596588221},
    {"lat": 27.68573073111224, "lng": 85.34661517039207},
    {"lat": 27.685993002260627, "lng": 85.34560585904082},
    {"lat": 27.686096319735913, "lng": 85.34519816327055},
    {"lat": 27.686309419165855, "lng": 85.34426306305173},
    {"lat": 27.68655173986873, "lng": 85.34328504201785},
    {"lat": 27.686729908747598, "lng": 85.34265143870675},
    {"lat": 27.686911603705823, "lng": 85.34189639686906},
    {"lat": 27.687171300034084, "lng": 85.34075539623969},
    {"lat": 27.687445709838748, "lng": 85.33946306654506},
    {"lat": 27.687817197565167, "lng": 85.33749591511165},
    {"lat": 27.68818913281696, "lng": 85.33577593425962},
    {"lat": 27.688544206355076, "lng": 85.33423283013346},
    {"lat": 27.688831175728488, "lng": 85.33287120437647},
    {"lat": 27.689166718843087, "lng": 85.33137613573538},
    {"lat": 27.68950652899623, "lng": 85.33026934707839},
    {"lat": 27.689816761509235, "lng": 85.32954595717528},
    {"lat": 27.690262857529987, "lng": 85.32859205898852},
    {"lat": 27.69071731055248, "lng": 85.32762893905108},
    {"lat": 27.691325647020754, "lng": 85.3263703810637},
    {"lat": 27.691789315450194, "lng": 85.32539698810585},
    {"lat": 27.692177196342374, "lng": 85.32454864518515},
    {"lat": 27.69259889149775, "lng": 85.32364596552728},
    {"lat": 27.693009215453827, "lng": 85.32281952735282},
    {"lat": 27.6934745512014, "lng": 85.32183830568535},
    {"lat": 27.694003822832737, "lng": 85.32070956536518},
    {"lat": 27.69411906381537, "lng": 85.32042497757365},
    {"lat": 27.69425092896732, "lng": 85.32023694877175},
    {"lat": 27.69434117646913, "lng": 85.32012094330352},
    {"lat": 27.694450423397036, "lng": 85.32008003954438},
    {"lat": 27.694673881449955, "lng": 85.32011518004897},
    {"lat": 27.694787877869892, "lng": 85.32036060217384},
    {"lat": 27.695001620836347, "lng": 85.3207133126593},
    {"lat": 27.695133731122066, "lng": 85.32085805876456},
    {"lat": 27.695524404211877, "lng": 85.32093181951247},
    {"lat": 27.69623317595345, "lng": 85.32108832475403},
    {"lat": 27.697070182340816, "lng": 85.32129211989975},
    {"lat": 27.697777616379586, "lng": 85.32145164893062},
    {"lat": 27.698351143351086, "lng": 85.32156430170924},
    {"lat": 27.698466323352562, "lng": 85.32145701334865},
    {"lat": 27.698484134682133, "lng": 85.32144628451259},
    {"lat": 27.698550630286906, "lng": 85.32110296175868},
    {"lat": 27.69879227888316, "lng": 85.31987232905406},
    {"lat": 27.699037617010294, "lng": 85.3186702244691},
    {"lat": 27.6992146776543, "lng": 85.31780107329622},
    {"lat": 27.69919805385805, "lng": 85.31760124872461},
    {"lat": 27.699097123612205, "lng": 85.31731559346453},
    {"lat": 27.69892613568863, "lng": 85.31681938479677},
    {"lat": 27.698901976311753, "lng": 85.3166233513543},
    {"lat": 27.698937187517213, "lng": 85.31642731789199},
    {"lat": 27.699063053566512, "lng": 85.31636696824144},
    {"lat": 27.699203168589005, "lng": 85.31634148720352},
    {"lat": 27.69936306244623, "lng": 85.31636596423004},
    {"lat": 27.6993868106899, "lng": 85.31636864643906},
    {"lat": 27.699478241379754, "lng": 85.3156927297673},
    {"lat": 27.69953998673739, "lng": 85.315225108412},
    {"lat": 27.69972284778385, "lng": 85.31510843231985},
    {"lat": 27.699757282621967, "lng": 85.31498505070516},
    {"lat": 27.699694349978586, "lng": 85.31480802491018},
    {"lat": 27.69963854175505, "lng": 85.31477181508848},
    {"lat": 27.699712161107755, "lng": 85.31439496472188},
    {"lat": 27.699862365625087, "lng": 85.31367586223712},
    {"lat": 27.69993172167787, "lng": 85.31348722199233},
    {"lat": 27.700251339528062, "lng": 85.31349124530585},
    {"lat": 27.70075054435114, "lng": 85.31354944025037},
    {"lat": 27.701033144522643, "lng": 85.31356955681798},
    {"lat": 27.701434483004356, "lng": 85.31358028565404},
    {"lat": 27.701957979613624, "lng": 85.313618416494},
    {"lat": 27.70265223236503, "lng": 85.31366467065993},
    {"lat": 27.703241412035133, "lng": 85.31371271673426},
    {"lat": 27.70385562098578, "lng": 85.3137307262595},
    {"lat": 27.70446735676456, "lng": 85.31381142370101},
    {"lat": 27.705243550404578, "lng": 85.31397159111539},
    {"lat": 27.705816151564655, "lng": 85.31411512267722},
    {"lat": 27.70605599440404, "lng": 85.31411914599074},
    {"lat": 27.706490740127535, "lng": 85.31415496818808},
    {"lat": 27.706740080140708, "lng": 85.31420056574133},
    {"lat": 27.706973925915012, "lng": 85.3141884978187}
  ];

  var ratnaparkToGongabu = [
    {"lat": 27.706973925915012, "lng": 85.3141884978187},
    {"lat": 27.707460592623786, "lng": 85.31427588418708},
    {"lat": 27.707831037144633, "lng": 85.31431879953132},
    {"lat": 27.708353573437222, "lng": 85.31435366824851},
    {"lat": 27.708514791124486, "lng": 85.31438737100419},
    {"lat": 27.708643020823406, "lng": 85.31450002378281},
    {"lat": 27.708797371187, "lng": 85.31455366796311},
    {"lat": 27.709091101439927, "lng": 85.3145885366803},
    {"lat": 27.709372492706255, "lng": 85.31463413423356},
    {"lat": 27.709819214370356, "lng": 85.31472398823556},
    {"lat": 27.710114851303192, "lng": 85.31477226799782},
    {"lat": 27.710508397269123, "lng": 85.31481628522113},
    {"lat": 27.711038294761224, "lng": 85.3148863152602},
    {"lat": 27.711235383936184, "lng": 85.31491447845488},
    {"lat": 27.711829727177403, "lng": 85.31501878859808},
    {"lat": 27.712478832110843, "lng": 85.31511947848554},
    {"lat": 27.713161930056565, "lng": 85.3152750466084},
    {"lat": 27.713720910268247, "lng": 85.31538501717802},
    {"lat": 27.714329207952503, "lng": 85.31549705557913},
    {"lat": 27.714988992592225, "lng": 85.31561641823993},
    {"lat": 27.715655404837666, "lng": 85.3157379673217},
    {"lat": 27.716303484811792, "lng": 85.31586718097523},
    {"lat": 27.71682957499542, "lng": 85.31591510168559},
    {"lat": 27.71822364900506, "lng": 85.31715042539827},
    {"lat": 27.72003768627551, "lng": 85.31889922567598},
    {"lat": 27.721376821051212, "lng": 85.32005256152732},
    {"lat": 27.72279192600529, "lng": 85.32112009474031},
    {"lat": 27.724583918029566, "lng": 85.32236127883154},
    {"lat": 27.726407346425173, "lng": 85.32324104338842},
    {"lat": 27.72807879566093, "lng": 85.32403497725683},
    {"lat": 27.728316215348553, "lng": 85.3248932841416},
    {"lat": 27.729474816004647, "lng": 85.32485036879736},
    {"lat": 27.729878423694498, "lng": 85.32501130042682},
    {"lat": 27.730187064393743, "lng": 85.32540826827245},
    {"lat": 27.731195676822338, "lng": 85.32664320061308},
    {"lat": 27.732325757590278, "lng": 85.32795211861234},
    {"lat": 27.73382304391428, "lng": 85.32987497442956},
    {"lat": 27.73588372095199, "lng": 85.33244989508385},
    {"lat": 27.737288830737086, "lng": 85.33421946026952},
    {"lat": 27.738487912334303, "lng": 85.3355900765655},
    {"lat": 27.7398009319168, "lng": 85.33687489278547},
    {"lat": 27.7399453490591, "lng": 85.33701548654399},
    {"lat": 27.740344170407674, "lng": 85.3363502987083},
    {"lat": 27.74197742355539, "lng": 85.33302435952983},
    {"lat": 27.742005910311637, "lng": 85.33214459497295},
    {"lat": 27.741526385036785, "lng": 85.33100733321238},
    {"lat": 27.74095189536955, "lng": 85.33002028543315},
    {"lat": 27.739139971491404, "lng": 85.32710204202495},
    {"lat": 27.73766850686082, "lng": 85.32453417778015},
    {"lat": 27.735958410525292, "lng": 85.32192001420817},
    {"lat": 27.73521926486329, "lng": 85.32013926563405},
    {"lat": 27.734943875421095, "lng": 85.31709227619314},
    {"lat": 27.73471522259005, "lng": 85.31442761421204}
  ];

  var koteshworToGongabu = [
    {"lat": 27.734787433670668, "lng": 85.31443754587109},
    {"lat": 27.734839404265475, "lng": 85.31452618913426},
    {"lat": 27.734905877706566, "lng": 85.31528257207646},
    {"lat": 27.734976162221, "lng": 85.3168105153582},
    {"lat": 27.735029120819217, "lng": 85.31789895020545},
    {"lat": 27.73505523534473, "lng": 85.3188082190615},
    {"lat": 27.735213259802418, "lng": 85.3198662276651},
    {"lat": 27.735400809120726, "lng": 85.32066552595154},
    {"lat": 27.73585424980977, "lng": 85.32163916782395},
    {"lat": 27.736442062475106, "lng": 85.32263773863994},
    {"lat": 27.73714400757342, "lng": 85.32371202141196},
    {"lat": 27.7379212392614, "lng": 85.32491999487954},
    {"lat": 27.73860041771356, "lng": 85.32606531062838},
    {"lat": 27.739199897250497, "lng": 85.32708467139517},
    {"lat": 27.739943014573335, "lng": 85.32835454951052},
    {"lat": 27.74059254626709, "lng": 85.32940492896977},
    {"lat": 27.741372960294402, "lng": 85.33068933897073},
    {"lat": 27.741749346007428, "lng": 85.33132238301914},
    {"lat": 27.74194059798643, "lng": 85.3318646734848},
    {"lat": 27.742018936574677, "lng": 85.33234747110748},
    {"lat": 27.74197620644261, "lng": 85.33308239637756},
    {"lat": 27.741699319902892, "lng": 85.3336500533061},
    {"lat": 27.741203173103727, "lng": 85.33465588168669},
    {"lat": 27.74064371101043, "lng": 85.33580269711027},
    {"lat": 27.74047991001218, "lng": 85.33612187998304},
    {"lat": 27.739949165644973, "lng": 85.33717215674947},
    {"lat": 27.739296109955433, "lng": 85.33833536662738},
    {"lat": 27.73890415793482, "lng": 85.3390144488103},
    {"lat": 27.73846472342468, "lng": 85.33967206822115},
    {"lat": 27.738037407409745, "lng": 85.34015754805284},
    {"lat": 27.737582953321432, "lng": 85.3405348976871},
    {"lat": 27.736570870448205, "lng": 85.34121089666314},
    {"lat": 27.73518681122297, "lng": 85.34210675447412},
    {"lat": 27.734192683746397, "lng": 85.34272693252392},
    {"lat": 27.733219203771483, "lng": 85.3433427703112},
    {"lat": 27.732387746185513, "lng": 85.34387160931759},
    {"lat": 27.731687136861442, "lng": 85.34431953822308},
    {"lat": 27.731018244792804, "lng": 85.34478005843212},
    {"lat": 27.730552913254343, "lng": 85.34506169037869},
    {"lat": 27.72997836851196, "lng": 85.34543451743176},
    {"lat": 27.729330221427446, "lng": 85.34581002669384},
    {"lat": 27.72913535342888, "lng": 85.34586635315509},
    {"lat": 27.728940485418686, "lng": 85.34589049296429},
    {"lat": 27.72862234428787, "lng": 85.3459012217071},
    {"lat": 27.72830895152482, "lng": 85.34582611994793},
    {"lat": 27.72705213288131, "lng": 85.34543183522274},
    {"lat": 27.72588592978938, "lng": 85.34507510142376},
    {"lat": 27.72495770876736, "lng": 85.34480956273129},
    {"lat": 27.724362702631808, "lng": 85.34476128296902},
    {"lat": 27.723670680649224, "lng": 85.3449258860881},
    {"lat": 27.72255695834808, "lng": 85.34533044094712},
    {"lat": 27.721653311388213, "lng": 85.3456539518261},
    {"lat": 27.720837821866812, "lng": 85.34595767840781},
    {"lat": 27.72001772835641, "lng": 85.34627202622339},
    {"lat": 27.719635453308495, "lng": 85.34641418330118},
    {"lat": 27.718780752755787, "lng": 85.34674817872322},
    {"lat": 27.718256008661726, "lng": 85.34685546708381},
    {"lat": 27.717766024506126, "lng": 85.3467570841598},
    {"lat": 27.716632732925717, "lng": 85.34633689537428},
    {"lat": 27.715659392393803, "lng": 85.3459757566452},
    {"lat": 27.71455604930306, "lng": 85.34567187702945},
    {"lat": 27.714066902455272, "lng": 85.3455726352959},
    {"lat": 27.713212077454582, "lng": 85.34540902054599},
    {"lat": 27.71270234438591, "lng": 85.34525374948922},
    {"lat": 27.712145120296302, "lng": 85.34498046333188},
    {"lat": 27.711302153058664, "lng": 85.34458617860669},
    {"lat": 27.710390316374227, "lng": 85.34412361302405},
    {"lat": 27.709405698667023, "lng": 85.34388489642173},
    {"lat": 27.708960458332957, "lng": 85.34376151417146},
    {"lat": 27.708529465512974, "lng": 85.34356839575797},
    {"lat": 27.70810666370741, "lng": 85.34338925078787},
    {"lat": 27.70793806453948, "lng": 85.34342411950506},
    {"lat": 27.707738594764866, "lng": 85.34348312810339},
    {"lat": 27.707563457346016, "lng": 85.34379426434911},
    {"lat": 27.706993540779767, "lng": 85.34455462231918},
    {"lat": 27.706414122552086, "lng": 85.3452600432901},
    {"lat": 27.70596616287217, "lng": 85.34589873804103},
    {"lat": 27.705790437250343, "lng": 85.34639226506603},
    {"lat": 27.7057286945214, "lng": 85.34693943513881},
    {"lat": 27.70578331388136, "lng": 85.34761401022348},
    {"lat": 27.705885423690898, "lng": 85.34828322185527},
    {"lat": 27.70609439556666, "lng": 85.34950362695704},
    {"lat": 27.70616326121076, "lng": 85.34992205156337},
    {"lat": 27.7062416255115, "lng": 85.35039412034999},
    {"lat": 27.706168010563918, "lng": 85.35088496459971},
    {"lat": 27.705918669243356, "lng": 85.3513516689683},
    {"lat": 27.705574339816277, "lng": 85.35172181381236},
    {"lat": 27.70523786893833, "lng": 85.35186137713238},
    {"lat": 27.704901397985605, "lng": 85.35192583797084},
    {"lat": 27.703927724795477, "lng": 85.35198485005894},
    {"lat": 27.703001578002475, "lng": 85.35208140958348},
    {"lat": 27.70266911274792, "lng": 85.3521913805833},
    {"lat": 27.70236514436733, "lng": 85.35237645257511},
    {"lat": 27.7016281667199, "lng": 85.35293541582672},
    {"lat": 27.700827864497914, "lng": 85.35352818401901},
    {"lat": 27.70004468316129, "lng": 85.35411262148192},
    {"lat": 27.699327429938954, "lng": 85.35467590732688},
    {"lat": 27.69867718847195, "lng": 85.35502567434838},
    {"lat": 27.697962255724217, "lng": 85.35522415781548},
    {"lat": 27.69708830554611, "lng": 85.35518124247125},
    {"lat": 27.696032386460487, "lng": 85.35506090381533},
    {"lat": 27.69520394722618, "lng": 85.35495920744496},
    {"lat": 27.69487620804614, "lng": 85.35483716650222},
    {"lat": 27.694557968401433, "lng": 85.35466684666234},
    {"lat": 27.693341989389484, "lng": 85.35398019155409},
    {"lat": 27.69208056443822, "lng": 85.35325315057796},
    {"lat": 27.690926687509975, "lng": 85.35260447492576},
    {"lat": 27.69044693480397, "lng": 85.35233625402427},
    {"lat": 27.68938054623823, "lng": 85.35170325269675},
    {"lat": 27.688495249143365, "lng": 85.35120832588346},
    {"lat": 27.6878365660521, "lng": 85.3508417587291},
    {"lat": 27.687136769024132, "lng": 85.35039466344664},
    {"lat": 27.686485992255154, "lng": 85.35003792964766},
    {"lat": 27.685848524440573, "lng": 85.34970533572981},
    {"lat": 27.685233384280128, "lng": 85.3494833853759},
    {"lat": 27.684613473063468, "lng": 85.34936536817925},
    {"lat": 27.684219197690354, "lng": 85.34936536794568},
    {"lat": 27.683934179336994, "lng": 85.3492473509826},
    {"lat": 27.683568404041786, "lng": 85.34905959635155},
    {"lat": 27.682810804950172, "lng": 85.34930449552634},
    {"lat": 27.68212674961172, "lng": 85.34939569063285},
    {"lat": 27.68044151255964, "lng": 85.34949493501607},
    {"lat": 27.678873845394417, "lng": 85.34951639268819},
    {"lat": 27.678650569755597, "lng": 85.34926962945882},
    {"lat": 27.677961737781143, "lng": 85.34818065259877},
    {"lat": 27.676683824200285, "lng": 85.34621191118184},
    {"lat": 27.67604595399177, "lng": 85.34524650852127}
  ];

  
//for path polyline
//polyline from koteshwor to ratnapark
  var kotToRatnaparkPath = <LatLng>[
    LatLng(27.67604595399177, 85.34524650852127),
    LatLng(27.676550149753904, 85.34597301322634),
    LatLng(27.677225926446624, 85.34699858909657),
    LatLng(27.677994335286662, 85.34819753652623),
    LatLng(27.678773427448196, 85.34942196494153),
    LatLng(27.67893526988431, 85.3495297334411),
    LatLng(27.679104238105207, 85.34953289595707),
    LatLng(27.679829696303386, 85.34951935235075),
    LatLng(27.68056339681933, 85.34948162115482),
    LatLng(27.681169079704013, 85.3494427291241),
    LatLng(27.681887009758768, 85.3494013477126),
    LatLng(27.682626213661937, 85.34931615799088),
    LatLng(27.68320347805139, 85.34920490689147),
    LatLng(27.683708040808312, 85.34897157982125),
    LatLng(27.6839793658395, 85.34880068463146),
    LatLng(27.68423643967758, 85.34860833089076),
    LatLng(27.68473165810179, 85.34816040198527),
    LatLng(27.68516611165368, 85.34764187101858),
    LatLng(27.685482530664537, 85.3471596588221),
    LatLng(27.68573073111224, 85.34661517039207),
    LatLng(27.685993002260627, 85.34560585904082),
    LatLng(27.686096319735913, 85.34519816327055),
    LatLng(27.686309419165855, 85.34426306305173),
    LatLng(27.68655173986873, 85.34328504201785),
    LatLng(27.686729908747598, 85.34265143870675),
    LatLng(27.686911603705823, 85.34189639686906),
    LatLng(27.687171300034084, 85.34075539623969),
    LatLng(27.687445709838748, 85.33946306654506),
    LatLng(27.687817197565167, 85.33749591511165),
    LatLng(27.68818913281696, 85.33577593425962),
    LatLng(27.688544206355076, 85.33423283013346),
    LatLng(27.688831175728488, 85.33287120437647),
    LatLng(27.689166718843087, 85.33137613573538),
    LatLng(27.68950652899623, 85.33026934707839),
    LatLng(27.689816761509235, 85.32954595717528),
    LatLng(27.690262857529987, 85.32859205898852),
    LatLng(27.69071731055248, 85.32762893905108),
    LatLng(27.691325647020754, 85.3263703810637),
    LatLng(27.691789315450194, 85.32539698810585),
    LatLng(27.692177196342374, 85.32454864518515),
    LatLng(27.69259889149775, 85.32364596552728),
    LatLng(27.693009215453827, 85.32281952735282),
    LatLng(27.6934745512014, 85.32183830568535),
    LatLng(27.694003822832737, 85.32070956536518),
    LatLng(27.69411906381537, 85.32042497757365),
    LatLng(27.69425092896732, 85.32023694877175),
    LatLng(27.69434117646913, 85.32012094330352),
    LatLng(27.694450423397036, 85.32008003954438),
    LatLng(27.694673881449955, 85.32011518004897),
    LatLng(27.694787877869892, 85.32036060217384),
    LatLng(27.695001620836347, 85.3207133126593),
    LatLng(27.695133731122066, 85.32085805876456),
    LatLng(27.695524404211877, 85.32093181951247),
    LatLng(27.69623317595345, 85.32108832475403),
    LatLng(27.697070182340816, 85.32129211989975),
    LatLng(27.697777616379586, 85.32145164893062),
    LatLng(27.698351143351086, 85.32156430170924),
    LatLng(27.698466323352562, 85.32145701334865),
    LatLng(27.698484134682133, 85.32144628451259),
    LatLng(27.698550630286906, 85.32110296175868),
    LatLng(27.69879227888316, 85.31987232905406),
    LatLng(27.699037617010294, 85.3186702244691),
    LatLng(27.6992146776543, 85.31780107329622),
    LatLng(27.69919805385805, 85.31760124872461),
    LatLng(27.699097123612205, 85.31731559346453),
    LatLng(27.69892613568863, 85.31681938479677),
    LatLng(27.698901976311753, 85.3166233513543),
    LatLng(27.698937187517213, 85.31642731789199),
    LatLng(27.699063053566512, 85.31636696824144),
    LatLng(27.699203168589005, 85.31634148720352),
    LatLng(27.69936306244623, 85.31636596423004),
    LatLng(27.6993868106899, 85.31636864643906),
    LatLng(27.699478241379754, 85.3156927297673),
    LatLng(27.69953998673739, 85.315225108412),
    LatLng(27.69972284778385, 85.31510843231985),
    LatLng(27.699757282621967, 85.31498505070516),
    LatLng(27.699694349978586, 85.31480802491018),
    LatLng(27.69963854175505, 85.31477181508848),
    LatLng(27.699712161107755, 85.31439496472188),
    LatLng(27.699862365625087, 85.31367586223712),
    LatLng(27.69993172167787, 85.31348722199233),
    LatLng(27.700251339528062, 85.31349124530585),
    LatLng(27.70075054435114, 85.31354944025037),
    LatLng(27.701033144522643, 85.31356955681798),
    LatLng(27.701434483004356, 85.31358028565404),
    LatLng(27.701957979613624, 85.313618416494),
    LatLng(27.70265223236503, 85.31366467065993),
    LatLng(27.703241412035133, 85.31371271673426),
    LatLng(27.70385562098578, 85.3137307262595),
    LatLng(27.70446735676456, 85.31381142370101),
    LatLng(27.705243550404578, 85.31397159111539),
    LatLng(27.705816151564655, 85.31411512267722),
    LatLng(27.70605599440404, 85.31411914599074),
    LatLng(27.706490740127535, 85.31415496818808),
    LatLng(27.706740080140708, 85.31420056574133),
    LatLng(27.706973925915012, 85.3141884978187)
  ];

//polyline from ratnapark to gongabu

  var ratnaparkToGongabuPath = <LatLng>[
    LatLng(27.706973925915012, 85.3141884978187),
    LatLng(27.707460592623786, 85.31427588418708),
    LatLng(27.707831037144633, 85.31431879953132),
    LatLng(27.708353573437222, 85.31435366824851),
    LatLng(27.708514791124486, 85.31438737100419),
    LatLng(27.708643020823406, 85.31450002378281),
    LatLng(27.708797371187, 85.31455366796311),
    LatLng(27.709091101439927, 85.3145885366803),
    LatLng(27.709372492706255, 85.31463413423356),
    LatLng(27.709819214370356, 85.31472398823556),
    LatLng(27.710114851303192, 85.31477226799782),
    LatLng(27.710508397269123, 85.31481628522113),
    LatLng(27.711038294761224, 85.3148863152602),
    LatLng(27.711235383936184, 85.31491447845488),
    LatLng(27.711829727177403, 85.31501878859808),
    LatLng(27.712478832110843, 85.31511947848554),
    LatLng(27.713161930056565, 85.3152750466084),
    LatLng(27.713720910268247, 85.31538501717802),
    LatLng(27.714329207952503, 85.31549705557913),
    LatLng(27.714988992592225, 85.31561641823993),
    LatLng(27.715655404837666, 85.3157379673217),
    LatLng(27.716303484811792, 85.31586718097523),
    LatLng(27.71682957499542, 85.31591510168559),
    LatLng(27.71822364900506, 85.31715042539827),
    LatLng(27.72003768627551, 85.31889922567598),
    LatLng(27.721376821051212, 85.32005256152732),
    LatLng(27.72279192600529, 85.32112009474031),
    LatLng(27.724583918029566, 85.32236127883154),
    LatLng(27.726407346425173, 85.32324104338842),
    LatLng(27.72807879566093, 85.32403497725683),
    LatLng(27.728316215348553, 85.3248932841416),
    LatLng(27.729474816004647, 85.32485036879736),
    LatLng(27.729878423694498, 85.32501130042682),
    LatLng(27.730187064393743, 85.32540826827245),
    LatLng(27.731195676822338, 85.32664320061308),
    LatLng(27.732325757590278, 85.32795211861234),
    LatLng(27.73382304391428, 85.32987497442956),
    LatLng(27.73588372095199, 85.33244989508385),
    LatLng(27.737288830737086, 85.33421946026952),
    LatLng(27.738487912334303, 85.3355900765655),
    LatLng(27.7398009319168, 85.33687489278547),
    LatLng(27.7399453490591, 85.33701548654399),
    LatLng(27.740344170407674, 85.3363502987083),
    LatLng(27.74197742355539, 85.33302435952983),
    LatLng(27.742005910311637, 85.33214459497295),
    LatLng(27.741526385036785, 85.33100733321238),
    LatLng(27.74095189536955, 85.33002028543315),
    LatLng(27.739139971491404, 85.32710204202495),
    LatLng(27.73766850686082, 85.32453417778015),
    LatLng(27.735958410525292, 85.32192001420817),
    LatLng(27.73521926486329, 85.32013926563405),
    LatLng(27.734943875421095, 85.31709227619314),
    LatLng(27.73471522259005, 85.31442761421204)
  ];

//polyline from koteshwor to gongabu

  var koteshworToGongabuPath = <LatLng>[
    LatLng(27.734787433670668, 85.31443754587109),
    LatLng(27.734839404265475, 85.31452618913426),
    LatLng(27.734905877706566, 85.31528257207646),
    LatLng(27.734976162221, 85.3168105153582),
    LatLng(27.735029120819217, 85.31789895020545),
    LatLng(27.73505523534473, 85.3188082190615),
    LatLng(27.735213259802418, 85.3198662276651),
    LatLng(27.735400809120726, 85.32066552595154),
    LatLng(27.73585424980977, 85.32163916782395),
    LatLng(27.736442062475106, 85.32263773863994),
    LatLng(27.73714400757342, 85.32371202141196),
    LatLng(27.7379212392614, 85.32491999487954),
    LatLng(27.73860041771356, 85.32606531062838),
    LatLng(27.739199897250497, 85.32708467139517),
    LatLng(27.739943014573335, 85.32835454951052),
    LatLng(27.74059254626709, 85.32940492896977),
    LatLng(27.741372960294402, 85.33068933897073),
    LatLng(27.741749346007428, 85.33132238301914),
    LatLng(27.74194059798643, 85.3318646734848),
    LatLng(27.742018936574677, 85.33234747110748),
    LatLng(27.74197620644261, 85.33308239637756),
    LatLng(27.741699319902892, 85.3336500533061),
    LatLng(27.741203173103727, 85.33465588168669),
    LatLng(27.74064371101043, 85.33580269711027),
    LatLng(27.74047991001218, 85.33612187998304),
    LatLng(27.739949165644973, 85.33717215674947),
    LatLng(27.739296109955433, 85.33833536662738),
    LatLng(27.73890415793482, 85.3390144488103),
    LatLng(27.73846472342468, 85.33967206822115),
    LatLng(27.738037407409745, 85.34015754805284),
    LatLng(27.737582953321432, 85.3405348976871),
    LatLng(27.736570870448205, 85.34121089666314),
    LatLng(27.73518681122297, 85.34210675447412),
    LatLng(27.734192683746397, 85.34272693252392),
    LatLng(27.733219203771483, 85.3433427703112),
    LatLng(27.732387746185513, 85.34387160931759),
    LatLng(27.731687136861442, 85.34431953822308),
    LatLng(27.731018244792804, 85.34478005843212),
    LatLng(27.730552913254343, 85.34506169037869),
    LatLng(27.72997836851196, 85.34543451743176),
    LatLng(27.729330221427446, 85.34581002669384),
    LatLng(27.72913535342888, 85.34586635315509),
    LatLng(27.728940485418686, 85.34589049296429),
    LatLng(27.72862234428787, 85.3459012217071),
    LatLng(27.72830895152482, 85.34582611994793),
    LatLng(27.72705213288131, 85.34543183522274),
    LatLng(27.72588592978938, 85.34507510142376),
    LatLng(27.72495770876736, 85.34480956273129),
    LatLng(27.724362702631808, 85.34476128296902),
    LatLng(27.723670680649224, 85.3449258860881),
    LatLng(27.72255695834808, 85.34533044094712),
    LatLng(27.721653311388213, 85.3456539518261),
    LatLng(27.720837821866812, 85.34595767840781),
    LatLng(27.72001772835641, 85.34627202622339),
    LatLng(27.719635453308495, 85.34641418330118),
    LatLng(27.718780752755787, 85.34674817872322),
    LatLng(27.718256008661726, 85.34685546708381),
    LatLng(27.717766024506126, 85.3467570841598),
    LatLng(27.716632732925717, 85.34633689537428),
    LatLng(27.715659392393803, 85.3459757566452),
    LatLng(27.71455604930306, 85.34567187702945),
    LatLng(27.714066902455272, 85.3455726352959),
    LatLng(27.713212077454582, 85.34540902054599),
    LatLng(27.71270234438591, 85.34525374948922),
    LatLng(27.712145120296302, 85.34498046333188),
    LatLng(27.711302153058664, 85.34458617860669),
    LatLng(27.710390316374227, 85.34412361302405),
    LatLng(27.709405698667023, 85.34388489642173),
    LatLng(27.708960458332957, 85.34376151417146),
    LatLng(27.708529465512974, 85.34356839575797),
    LatLng(27.70810666370741, 85.34338925078787),
    LatLng(27.70793806453948, 85.34342411950506),
    LatLng(27.707738594764866, 85.34348312810339),
    LatLng(27.707563457346016, 85.34379426434911),
    LatLng(27.706993540779767, 85.34455462231918),
    LatLng(27.706414122552086, 85.3452600432901),
    LatLng(27.70596616287217, 85.34589873804103),
    LatLng(27.705790437250343, 85.34639226506603),
    LatLng(27.7057286945214, 85.34693943513881),
    LatLng(27.70578331388136, 85.34761401022348),
    LatLng(27.705885423690898, 85.34828322185527),
    LatLng(27.70609439556666, 85.34950362695704),
    LatLng(27.70616326121076, 85.34992205156337),
    LatLng(27.7062416255115, 85.35039412034999),
    LatLng(27.706168010563918, 85.35088496459971),
    LatLng(27.705918669243356, 85.3513516689683),
    LatLng(27.705574339816277, 85.35172181381236),
    LatLng(27.70523786893833, 85.35186137713238),
    LatLng(27.704901397985605, 85.35192583797084),
    LatLng(27.703927724795477, 85.35198485005894),
    LatLng(27.703001578002475, 85.35208140958348),
    LatLng(27.70266911274792, 85.3521913805833),
    LatLng(27.70236514436733, 85.35237645257511),
    LatLng(27.7016281667199, 85.35293541582672),
    LatLng(27.700827864497914, 85.35352818401901),
    LatLng(27.70004468316129, 85.35411262148192),
    LatLng(27.699327429938954, 85.35467590732688),
    LatLng(27.69867718847195, 85.35502567434838),
    LatLng(27.697962255724217, 85.35522415781548),
    LatLng(27.69708830554611, 85.35518124247125),
    LatLng(27.696032386460487, 85.35506090381533),
    LatLng(27.69520394722618, 85.35495920744496),
    LatLng(27.69487620804614, 85.35483716650222),
    LatLng(27.694557968401433, 85.35466684666234),
    LatLng(27.693341989389484, 85.35398019155409),
    LatLng(27.69208056443822, 85.35325315057796),
    LatLng(27.690926687509975, 85.35260447492576),
    LatLng(27.69044693480397, 85.35233625402427),
    LatLng(27.68938054623823, 85.35170325269675),
    LatLng(27.688495249143365, 85.35120832588346),
    LatLng(27.6878365660521, 85.3508417587291),
    LatLng(27.687136769024132, 85.35039466344664),
    LatLng(27.686485992255154, 85.35003792964766),
    LatLng(27.685848524440573, 85.34970533572981),
    LatLng(27.685233384280128, 85.3494833853759),
    LatLng(27.684613473063468, 85.34936536817925),
    LatLng(27.684219197690354, 85.34936536794568),
    LatLng(27.683934179336994, 85.3492473509826),
    LatLng(27.683568404041786, 85.34905959635155),
    LatLng(27.682810804950172, 85.34930449552634),
    LatLng(27.68212674961172, 85.34939569063285),
    LatLng(27.68044151255964, 85.34949493501607),
    LatLng(27.678873845394417, 85.34951639268819),
    LatLng(27.678650569755597, 85.34926962945882),
    LatLng(27.677961737781143, 85.34818065259877),
    LatLng(27.676683824200285, 85.34621191118184),
    LatLng(27.67604595399177, 85.34524650852127)
  ];


var points = <LatLng>[
    LatLng(27.67604595399177, 85.34524650852127),
    LatLng(27.706973925915012, 85.3141884978187),
    LatLng(27.73471522259005, 85.31442761421204),
  ];

  var anotherRoute = <LatLng>[
    LatLng(27.6670472, 85.3229302),
    LatLng(27.6668858, 85.3227961),
    LatLng(27.6669048, 85.3225976),
    LatLng(27.6662162, 85.3222167),
    LatLng(27.6655847, 85.3218198),
    LatLng(27.6652048, 85.3215784),
    LatLng(27.6655135, 85.3206825),
    LatLng(27.6651193, 85.3205216),
    LatLng(27.6643691, 85.3202158),
    LatLng(27.6640414, 85.3201407),
    LatLng(27.6637043, 85.3200656),
    LatLng(27.6634479, 85.3199422),
    LatLng(27.6632389, 85.3197062),
    LatLng(27.6627356, 85.3193307),
    LatLng(27.6620505, 85.3188211),
    LatLng(27.6615899, 85.3184134),
    LatLng(27.6614047, 85.3182471),
    LatLng(27.6627010, 85.3165573),
    LatLng(27.6638359, 85.3150767),
    LatLng(27.6647530, 85.3140360),
    LatLng(27.6650714, 85.3134352),
    LatLng(27.6653222, 85.3128022),
    LatLng(27.6660412, 85.3103989),
    LatLng(27.6666206, 85.3083926),
    LatLng(27.6666775, 85.3082693),
    LatLng(27.6670147, 85.3084785),
    LatLng(27.6677518, 85.3090310),
    LatLng(27.6685400, 85.3095299),
    LatLng(27.6692627, 85.3100502),
    LatLng(27.6694907, 85.3102112),
    LatLng(27.6696711, 85.3103828),
    LatLng(27.6698895, 85.3107369),
    LatLng(27.6701982, 85.3112036),
    LatLng(27.6705733, 85.3116918),
    LatLng(27.6711535, 85.3121585),
    LatLng(27.6717708, 85.3125072),
    LatLng(27.6723270, 85.3128612),
    LatLng(27.6727015, 85.3131562),
  ];

  
//distance formula
  double calculateDistance(lat1, lon1, lat2, lon2) {
    var p = 0.017453292519943295;
    var c = cos;
    var a = 0.5 -
        c((lat2 - lat1) * p) / 2 +
        c(lat1 * p) * c(lat2 * p) * (1 - c((lon2 - lon1) * p)) / 2;
    return 12742 * asin(sqrt(a));
  }

  //distance from koteshwor to ratnapark
  double distanceFromKotToRatna() {
    double totalDistance = 0;
    for (var i = 0; i < kotToRatnapark.length - 1; i++) {
      totalDistance += calculateDistance(
          kotToRatnapark[i]["lat"],
          kotToRatnapark[i]["lng"],
          kotToRatnapark[i+1]["lat"],
          kotToRatnapark[i+1]["lng"]);
    }
    return totalDistance * 1000;
  }

//distance from kot to gongabu
  double distanceFromKotToGongabu() {
    double totalDistance = 0;
    for (var i = 0; i < koteshworToGongabu.length - 1; i++) {
      totalDistance += calculateDistance(
          koteshworToGongabu[i]["lat"],
          koteshworToGongabu[i]["lng"],
          koteshworToGongabu[i + 1]["lat"],
          koteshworToGongabu[i + 1]["lng"]);
    }
    return totalDistance * 1000;
  }
//distance from ratnapark to gongabu
 double distanceFromRatnaToGongabu() {
    double totalDistance = 0;
    for (var i = 0; i < ratnaparkToGongabu.length - 1; i++) {
      totalDistance += calculateDistance(
          ratnaparkToGongabu[i]["lat"],
          ratnaparkToGongabu[i]["lng"],
          ratnaparkToGongabu[i + 1]["lat"],
          ratnaparkToGongabu[i + 1]["lng"]);
    }
    return totalDistance * 1000;
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        actions: [
          BackButton(
            onPressed: () {
              Navigator.pop(context);
            },
          ),
        ],
        title: Text("Route"),
      ),
      drawer: MyDrawer(),
      body: Stack(
        children: [
          FlutterMap(
            options: MapOptions(
              plugins: [
                // TappablePolylineMapPlugin(),
              ],
              center: points[1],
              zoom: 14.0,
              maxZoom: 18.0,
            ),
            layers: [
              TileLayerOptions(
                  urlTemplate:
                      "https://api.mapbox.com/styles/v1/manishdahal/ckjfdjp13n3j81at47rwkya4n/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoibWFuaXNoZGFoYWwiLCJhIjoiY2tpYWJkdDB6MGFqbTJzcnRpMmE4OWFlNiJ9.yW5q2POpsb9rkIZetl1omw",
                  additionalOptions: {
                    'accessToken': '$apikey',
                    'id': 'mapbox.mapbox-streets-v8'
                  }),
            
                PolylineLayerOptions(
                polylines: [
                  Polyline(
                    points: kotToRatnaparkPath,
                    color: Colors.blue,
                    strokeWidth: 3.0,
                  ),
                  Polyline(
                    points: ratnaparkToGongabuPath,
                    color: Colors.orange,
                    strokeWidth: 5,
                  ),
                  Polyline(
                    points: koteshworToGongabuPath,
                    color: Colors.green,
                    strokeWidth: 6,
                  ),
                ],
              ),
  MarkerLayerOptions(
                markers: [

                    Marker(
                      width: 80.0,
                      height: 80.0,
                      point: points[0],
                      builder: (ctx) {
                        return Container(
                          child: IconButton(
                            icon: Icon(FontAwesomeIcons.mapMarkerAlt),
                            color: Colors.red,
                            iconSize: 30.0,
                            onPressed: () {
                              showModalBottomSheet(
                                  context: context,
                                  builder: (context) {
                                    return Container(
                                        color: Colors.white,
                                        child: Column(
                                          // mainAxisAlignment: MainAxisAlignment.start,
                                          crossAxisAlignment:
                                              CrossAxisAlignment.start,
                                          children: [
                                            Row(
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.center,
                                              mainAxisAlignment:
                                                  MainAxisAlignment
                                                      .spaceBetween,
                                              children: [
                                                Padding(
                                                    padding: EdgeInsets.only(
                                                        left: 30.0)),
                                                Text(
                                                  "Jawlakhel Station",
                                                  style: TextStyle(
                                                    fontSize: 23.0,
                                                    fontWeight: FontWeight.bold,
                                                  ),
                                                ),
                                                CircleAvatar(
                                                    child: Icon(
                                                        FontAwesomeIcons.car))
                                              ],
                                            ),
                                            Divider(),
                                            Center(
                                                child:
                                                    Text("Pass By Vehicles",style: TextStyle(
                                                  fontSize: 22.0,
                                                  fontWeight: FontWeight.bold),)),
                                           ListTile(
                                              leading: Icon(FontAwesomeIcons.bus),
                                              title: Text('1. Aanapurna Yatayat',style: TextStyle(
                                                  fontSize: 20.0,
                                                  fontWeight: FontWeight.bold),),
                                              onTap: () {
                                                // Update the state of the app
                                                // ...
                                                // Then close the drawer
                                                Navigator.pop(context);
                                              },
                                            ),
                                            ListTile(
                                              leading: Icon(FontAwesomeIcons.bus),
                                              title: Text('2. Nepal Yatayat',style: TextStyle(
                                                  fontSize: 20.0,
                                                  fontWeight: FontWeight.bold),),
                                              onTap: () {
                                                // Update the state of the app
                                                // ...
                                                // Then close the drawer
                                                Navigator.pop(context);
                                              },
                                            ),
                                          ],
                                        ));
                                  });
                            },
                          ),
                        );
                      }),
                
                
                   Marker(
                      width: 80.0,
                      height: 80.0,
                      point: points[1],
                      builder: (ctx) {
                        return Container(
                          child: IconButton(
                            icon: Icon(FontAwesomeIcons.mapMarkerAlt),
                            color: Colors.red,
                            iconSize: 30.0,
                            onPressed: () {
                              showModalBottomSheet(
                                  context: context,
                                  builder: (context) {
                                    return Container(
                                        color: Colors.white,
                                        child: Column(
                                          // mainAxisAlignment: MainAxisAlignment.start,
                                          crossAxisAlignment:
                                              CrossAxisAlignment.start,
                                          children: [
                                            Row(
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.center,
                                              mainAxisAlignment:
                                                  MainAxisAlignment
                                                      .spaceBetween,
                                              children: [
                                                Padding(
                                                    padding: EdgeInsets.only(
                                                        left: 30.0)),
                                                Text(
                                                  "Jawlakhel Station",
                                                  style: TextStyle(
                                                    fontSize: 23.0,
                                                    fontWeight: FontWeight.bold,
                                                  ),
                                                ),
                                                CircleAvatar(
                                                    child: Icon(
                                                        FontAwesomeIcons.car))
                                              ],
                                            ),
                                            Divider(),
                                            Center(
                                                child:
                                                    Text("Pass By Vehicles",style: TextStyle(
                                                  fontSize: 22.0,
                                                  fontWeight: FontWeight.bold),)),
                                           ListTile(
                                              leading: Icon(FontAwesomeIcons.bus),
                                              title: Text('1. Aanapurna Yatayat',style: TextStyle(
                                                  fontSize: 20.0,
                                                  fontWeight: FontWeight.bold),),
                                              onTap: () {
                                                // Update the state of the app
                                                // ...
                                                // Then close the drawer
                                                Navigator.pop(context);
                                              },
                                            ),
                                            ListTile(
                                              leading: Icon(FontAwesomeIcons.bus),
                                              title: Text('2. Nepal Yatayat',style: TextStyle(
                                                  fontSize: 20.0,
                                                  fontWeight: FontWeight.bold),),
                                              onTap: () {
                                                // Update the state of the app
                                                // ...
                                                // Then close the drawer
                                                Navigator.pop(context);
                                              },
                                            ),
                                          ],
                                        ));
                                  });
                            },
                          ),
                        );
                      }),
                
                
                  Marker(
                      width: 80.0,
                      height: 80.0,
                      point: points[2],
                      builder: (ctx) {
                        return Container(
                          child: IconButton(
                            icon: Icon(FontAwesomeIcons.mapMarkerAlt),
                            color: Colors.red,
                            iconSize: 30.0,
                            onPressed: () {
                              showModalBottomSheet(
                                  context: context,
                                  builder: (context) {
                                    return Container(
                                        color: Colors.white,
                                        child: Column(
                                          // mainAxisAlignment: MainAxisAlignment.start,
                                          crossAxisAlignment:
                                              CrossAxisAlignment.start,
                                          children: [
                                            Row(
                                              crossAxisAlignment:
                                                  CrossAxisAlignment.center,
                                              mainAxisAlignment:
                                                  MainAxisAlignment
                                                      .spaceBetween,
                                              children: [
                                                Padding(
                                                    padding: EdgeInsets.only(
                                                        left: 30.0)),
                                                Text(
                                                  "Jawlakhel Station",
                                                  style: TextStyle(
                                                    fontSize: 23.0,
                                                    fontWeight: FontWeight.bold,
                                                  ),
                                                ),
                                                CircleAvatar(
                                                    child: Icon(
                                                        FontAwesomeIcons.car))
                                              ],
                                            ),
                                            Divider(),
                                            Center(
                                                child:
                                                    Text("Pass By Vehicles",style: TextStyle(
                                                  fontSize: 22.0,
                                                  fontWeight: FontWeight.bold),)),
                                           ListTile(
                                              leading: Icon(FontAwesomeIcons.bus),
                                              title: Text('1. Aanapurna Yatayat',style: TextStyle(
                                                  fontSize: 20.0,
                                                  fontWeight: FontWeight.bold),),
                                              onTap: () {
                                                // Update the state of the app
                                                // ...
                                                // Then close the drawer
                                                Navigator.pop(context);
                                              },
                                            ),
                                            ListTile(
                                              leading: Icon(FontAwesomeIcons.bus),
                                              title: Text('2. Nepal Yatayat',style: TextStyle(
                                                  fontSize: 20.0,
                                                  fontWeight: FontWeight.bold),),
                                              onTap: () {
                                                // Update the state of the app
                                                // ...
                                                // Then close the drawer
                                                Navigator.pop(context);
                                              },
                                            ),
                                          ],
                                        ));
                                  });
                            },
                          ),
                        );
                      }),
                
                
                ],
              ),
               
            ],
          ),
        ],
      ),
    );
  }
}
